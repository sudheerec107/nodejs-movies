(this["webpackJsonpreact-movies"]=this["webpackJsonpreact-movies"]||[]).push([[0],{17:function(e,t,n){e.exports={NavBar:"Navbar_NavBar__I43XN",Flex:"Navbar_Flex__1RkTZ",Heading:"Navbar_Heading__1lkbQ",AlignInput:"Navbar_AlignInput__1rX43"}},23:function(e,t,n){e.exports={Input:"input_Input__3BPgK",Label:"input_Label__24bIE",InputElement:"input_InputElement__2HI6E",Invalid:"input_Invalid__3QqA4"}},26:function(e,t,n){e.exports={Auth:"auth_Auth__2n1AO",Input:"auth_Input__2KPun",Red:"auth_Red__2a0MT"}},27:function(e,t,n){e.exports={Button:"Button_Button__3gFiX",Success:"Button_Success__2Rka1",Danger:"Button_Danger__2ogZq"}},30:function(e,t,n){e.exports={FloatLeft:"movie_FloatLeft__28bWh",FloatRight:"movie_FloatRight__20ZWB"}},42:function(e,t,n){e.exports={Loader:"Spinner_Loader__1twK-",load2:"Spinner_load2__2gkgc"}},45:function(e,t,n){e.exports=n(76)},50:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),l=(n(50),n(9)),c=n(10),u=n(12),s=n(11),p=n(2),m=n(8),d=n(21),v=n(13),h=n(26),f=n.n(h),g=n(23),E=n.n(g),b=function(e){var t=null,n=[E.a.InputElement];switch(e.invalid&&e.shouldValidate&&e.touched&&n.push(E.a.Invalid),e.elementType){case"input":t=r.a.createElement("input",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}));break;case"textarea":t=r.a.createElement("textarea",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}));break;case"select":t=r.a.createElement("select",{className:n.join(" "),value:e.value,onChange:e.changed},e.elementConfig.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.displayValue)})));break;default:t=r.a.createElement("input",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}))}return r.a.createElement("div",{className:E.a.Input},r.a.createElement("label",null,e.label),t)},_=n(42),y=n.n(_),S=function(){return r.a.createElement("div",{className:y.a.Loader},"Loading...")},O=n(27),k=n.n(O),j=function(e){return r.a.createElement("button",{className:[k.a.Button,k.a[e.btnType]].join(" "),onClick:e.clicked,disabled:e.disabled},e.children)},A=n(22),I=n.n(A),C=function(e){return{type:"AUTH_SUCCESS",token:e}},N=function(){return function(e){var t=localStorage.getItem("token");e(t?C(t):(localStorage.removeItem("token"),{type:"LOGOUT"}))}},T=function(e,t){var n=!0;return!t||(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),n)},w=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={controls:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Email Address"},value:"",validation:{required:!0,isEmail:!0},validity:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",validation:{required:!0,minLength:6},validity:!1,touched:!1},passwordCheck:{elementType:"input",elementConfig:{type:"password",placeholder:"Re Enter Password"},value:"",validation:{required:!0,minLength:6},validity:!1,touched:!1}},isSignup:!0},e.inputChangedHandler=function(t,n){var a=Object(v.a)(Object(v.a)({},e.state.controls),{},Object(d.a)({},n,Object(v.a)(Object(v.a)({},e.state.controls[n]),{},{value:t.target.value,validity:T(t.target.value,e.state.controls[n].validation),touched:!0})));e.setState({controls:a})},e.submitHandler=function(t){t.preventDefault(),e.props.onAuth(e.state.controls.email.value,e.state.controls.password.value,e.state.controls.passwordCheck.value,e.state.isSignup)},e.swithAuthHandler=function(){e.setState((function(e){return{isSignup:!e.isSignup}}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.controls)t.push({id:n,config:this.state.controls[n]});var a=t.map((function(t){return e.state.isSignup&&"passwordCheck"===t.id?null:r.a.createElement(b,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalid:!t.config.validity,shouldValidate:t.config.validation,touched:t.config.touched,changed:function(n){return e.inputChangedHandler(n,t.id)}})}));this.props.loading&&(a=r.a.createElement(S,null));var o=null;this.props.error&&(o=this.props.error.msg);var i=null;return this.props.isAuthenticated&&(i=r.a.createElement(p.a,{to:"movies"})),r.a.createElement("div",{className:f.a.Auth},r.a.createElement("div",{className:f.a.Red},o),i,r.a.createElement("form",{onSubmit:this.submitHandler},a,r.a.createElement(j,{btnType:"Success",disabled:!1},this.state.isSignup?"Log in":"Sign up")),r.a.createElement(j,{clicked:this.swithAuthHandler,btnType:"Danger"},"Switch To ",this.state.isSignup?"Sign up":"Log in"))}}]),n}(a.Component),L=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,isAuthenticated:null!=e.auth.token}}),(function(e){return{onAuth:function(t,n,a,r){return e(function(e,t,n,a){return function(r){r({type:"AUTH_START"});var o={email:e,password:t},i="http://localhost:5000/api/users/login";a||(i="http://localhost:5000/api/users/register",o.passwordCheck=n),I.a.post(i,o).then((function(e){localStorage.setItem("token",e.data.token),r(C(e.data.token))})).catch((function(e){r({type:"AUTH_FAIL",error:e.response.data})}))}}(t,n,a,r))}}}))(w),x=I.a.create({baseURL:""});x.interceptors.request.use((function(e){return e.headers["x-auth-token"]=localStorage.token,e})),x.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(localStorage.clear(),window.location="/auth"),Promise.reject(e)}));var M=x,H=(n(73),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).clickHandler=function(t){e.props.history.push("movie/"+t)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchData()}},{key:"render",value:function(){var e=this,t=null;this.props.loading&&(t=r.a.createElement(S,null));var n=Object.keys(this.props.movieGroups).map((function(t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("label",{className:"title"},t," ( ",e.props.movieGroups[t].length," )"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("hr",null),r.a.createElement("div",{className:"flex-container"},e.props.movieGroups[t].map((function(t){return r.a.createElement("div",{key:t._id,className:"movies-card",onClick:function(){return e.clickHandler(t._id)}},r.a.createElement("span",{className:"movie-title"},t.title))}))))}));return r.a.createElement("div",null,t,n)}}]),n}(a.Component)),U=Object(m.b)((function(e){return{movieGroups:e.movies.movieGroups,error:e.movies.error,loading:e.movies.loading}}),(function(e){return{fetchData:function(){return e((function(e){e({type:"MOVIES_START"}),M.get("/movies").then((function(t){e({type:"MOVIES_SUCCESS",payload:t.data})})).catch((function(t){e({type:"MOVIES_FAIL",payload:t})}))}))}}}))(H),F=function(e){return{type:"MOVIE_SUCCESS",payload:e}},R=n(30),V=n.n(R),B=n(43),D=n.n(B),G=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.movies&&0!==this.props.movies.length){var t=this.props.movies.find((function(t){return t._id===e.props.match.params.id}));t?this.props.updateMovie(t):this.props.fetchData(this.props.match.params.id)}else this.props.fetchData(this.props.match.params.id)}},{key:"render",value:function(){var e=null;null!=this.props.movie&&(e=r.a.createElement("div",{className:"movie"},r.a.createElement("div",{className:V.a.FloatLeft},r.a.createElement("div",{className:"title2"},this.props.movie.title)),r.a.createElement("div",{className:V.a.FloatRight},r.a.createElement("div",null,r.a.createElement("span",{className:"float-left title1"},this.props.movie.title),r.a.createElement("span",{className:"float-right"},r.a.createElement(D.a,{className:"big-font",name:"",value:this.props.movie.rating,starCount:5,editing:!1})),r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("span",{className:"float-left"},this.props.movie.year," | ",this.props.movie.movieLength," | ",this.props.movie.director),r.a.createElement("br",null),r.a.createElement("span",{className:"float-left"},"Cast: ",this.props.movie.cast.join(", ")),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("p",{className:"movie-description"},this.props.movie.description)))));var t=null;return this.props.loading&&(t=r.a.createElement(S,null)),r.a.createElement("div",null,t,e)}}]),n}(a.Component),q=Object(m.b)((function(e){return{movies:e.movies.movies,movie:e.movie.movie,error:e.movie.error,loading:e.movie.loading}}),(function(e){return{fetchData:function(t){return e(function(e){return function(t){t({type:"MOVIE_START"}),M.get("/movies/"+e).then((function(e){t(F(e.data))})).catch((function(e){t({type:"MOVIE_FAIL",payload:e.response.data})}))}}(t))},updateMovie:function(t){return e(F(t))}}}))(G),P=(n(75),n(17)),W=n.n(P),K=function(){return r.a.createElement("div",{className:[W.a.NavBar,W.a.Flex].join(" ")},r.a.createElement("div",null,r.a.createElement("span",{className:W.a.Heading},"MOVIE")),r.a.createElement("div",{className:W.a.AlignInput},"\ud83d\udd0e ",r.a.createElement("input",{type:"text"})))},X=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignUp()}},{key:"render",value:function(){var e=r.a.createElement(K,null);return this.props.isAuthenticated||(e=r.a.createElement(p.a,{to:"/auth"})),r.a.createElement("div",{className:"App"},e,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/auth",component:L}),r.a.createElement(p.b,{path:"/movie/:id",exact:!0,component:q}),r.a.createElement(p.b,{path:"/movies",exact:!0,component:U}),r.a.createElement(p.b,{path:"/",exact:!0,component:U})))}}]),n}(a.Component),Z=Object(m.b)((function(e){return{isAuthenticated:null!=e.auth.token}}),(function(e){return{onTryAutoSignUp:function(){return e(N())}}}))(X);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(20),Q=n(44),$=function(e,t){return Object(v.a)(Object(v.a)({},e),t)},z={token:localStorage.token,error:null,loading:!1},Y=function(e,t){return $(e,{token:null,error:null,loading:!0})},ee=function(e,t){return $(e,{token:t.token,error:null,loading:!1})},te=function(e,t){return $(e,{error:t.error,loading:!1})},ne=function(e,t){return $(e,{token:null,error:null,loading:!1})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Y(e);case"AUTH_SUCCESS":return ee(e,t);case"AUTH_FAIL":return te(e,t);case"LOGOUT":return ne(e);default:return e}},re=n(15),oe={error:null,loading:!1,movieGroups:{}},ie=function(e,t){return $(e,{loading:!0,movieGroups:{},error:null})},le=function(e,t){var n=t.payload,a=[],r={};return n.forEach((function(e){-1===a.indexOf(e.category)?(r[e.category]=[e],a.push(e.category)):r[e.category].push(e)})),$(e,{loading:!1,movieGroups:r,movies:t.payload,error:!1})},ce=function(e,t){return $(e,{loading:!1,movieGroups:{},error:t.payload})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIES_START":return ie(e);case"MOVIES_SUCCESS":return le(e,t);case"MOVIES_FAIL":return ce(e,t);default:return e}},se={error:null,loading:!1,movie:null},pe=function(e,t){return $(e,{loading:!0,movie:null,error:null})},me=function(e,t){return $(e,{loading:!1,movie:t.payload,movies:t.payload,error:!1})},de=function(e,t){return $(e,{loading:!1,movie:null,error:t.payload})},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_START":return pe(e);case"MOVIE_SUCCESS":return me(e,t);case"MOVIE_FAIL":return de(e,t);default:return e}},he=Object(re.c)({movies:ue,movie:ve,auth:ae}),fe=re.d,ge=Object(re.e)(he,fe(Object(re.a)(Q.a)));i.a.render(r.a.createElement(m.a,{store:ge},r.a.createElement(J.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.3367e65b.chunk.js.map